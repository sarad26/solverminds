{"version":3,"sources":["../../src/ts/grid.ts"],"names":[],"mappings":"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","file":"grid.js","sourcesContent":["import { GridOptions } from \"./entities/gridOptions\";\nimport { GridOptionsWrapper } from \"./gridOptionsWrapper\";\nimport { SelectionController } from \"./selectionController\";\nimport { ColumnApi } from \"./columnController/columnApi\";\nimport { ColumnController } from \"./columnController/columnController\";\nimport { RowRenderer } from \"./rendering/rowRenderer\";\nimport { HeaderRootComp } from \"./headerRendering/headerRootComp\";\nimport { FilterManager } from \"./filter/filterManager\";\nimport { ValueService } from \"./valueService/valueService\";\nimport { EventService } from \"./eventService\";\nimport { GridBodyComp } from \"./gridBodyComp/gridBodyComp\";\nimport { GridApi } from \"./gridApi\";\nimport { ColumnFactory } from \"./columnController/columnFactory\";\nimport { DisplayedGroupCreator } from \"./columnController/displayedGroupCreator\";\nimport { ExpressionService } from \"./valueService/expressionService\";\nimport { TemplateService } from \"./templateService\";\nimport { PopupService } from \"./widgets/popupService\";\nimport { Logger, LoggerFactory } from \"./logger\";\nimport { ColumnUtils } from \"./columnController/columnUtils\";\nimport { AutoWidthCalculator } from \"./rendering/autoWidthCalculator\";\nimport { HorizontalResizeService } from \"./headerRendering/horizontalResizeService\";\nimport { ComponentMeta, Context, ContextParams } from \"./context/context\";\nimport { GridComp } from \"./gridComp/gridComp\";\nimport { StandardMenuFactory } from \"./headerRendering/standardMenu\";\nimport { DragAndDropService } from \"./dragAndDrop/dragAndDropService\";\nimport { DragService } from \"./dragAndDrop/dragService\";\nimport { SortController } from \"./sortController\";\nimport { FocusController } from \"./focusController\";\nimport { MouseEventService } from \"./gridBodyComp/mouseEventService\";\nimport { CellNavigationService } from \"./cellNavigationService\";\nimport { Events, GridReadyEvent } from \"./events\";\nimport { ValueFormatterService } from \"./rendering/valueFormatterService\";\nimport { AgCheckbox } from \"./widgets/agCheckbox\";\nimport { AgRadioButton } from \"./widgets/agRadioButton\";\nimport { VanillaFrameworkOverrides } from \"./vanillaFrameworkOverrides\";\nimport { IFrameworkOverrides } from \"./interfaces/iFrameworkOverrides\";\nimport { ScrollVisibleService } from \"./gridBodyComp/scrollVisibleService\";\nimport { StylingService } from \"./styling/stylingService\";\nimport { ColumnHoverService } from \"./rendering/columnHoverService\";\nimport { ColumnAnimationService } from \"./rendering/columnAnimationService\";\nimport { AutoGroupColService } from \"./columnController/autoGroupColService\";\nimport { PaginationProxy } from \"./pagination/paginationProxy\";\nimport { PaginationAutoPageSizeService } from \"./pagination/paginationAutoPageSizeService\";\nimport { IRowModel } from \"./interfaces/iRowModel\";\nimport { Constants } from \"./constants/constants\";\nimport { ValueCache } from \"./valueService/valueCache\";\nimport { ChangeDetectionService } from \"./valueService/changeDetectionService\";\nimport { AlignedGridsService } from \"./alignedGridsService\";\nimport { UserComponentFactory } from \"./components/framework/userComponentFactory\";\nimport { AgGridRegisteredComponentInput, UserComponentRegistry } from \"./components/framework/userComponentRegistry\";\nimport { AgComponentUtils } from \"./components/framework/agComponentUtils\";\nimport { ComponentMetadataProvider } from \"./components/framework/componentMetadataProvider\";\nimport { Beans } from \"./rendering/beans\";\nimport { Environment } from \"./environment\";\nimport { AnimationFrameService } from \"./misc/animationFrameService\";\nimport { NavigationService } from \"./gridBodyComp/navigationService\";\nimport { RowContainerHeightService } from \"./rendering/rowContainerHeightService\";\nimport { SelectableService } from \"./rowNodes/selectableService\";\nimport { AutoHeightCalculator } from \"./rendering/row/autoHeightCalculator\";\nimport { PaginationComp } from \"./pagination/paginationComp\";\nimport { ResizeObserverService } from \"./misc/resizeObserverService\";\nimport { OverlayWrapperComponent } from \"./rendering/overlays/overlayWrapperComponent\";\nimport { Module } from \"./interfaces/iModule\";\nimport { AgGroupComponent } from \"./widgets/agGroupComponent\";\nimport { AgDialog } from \"./widgets/agDialog\";\nimport { AgPanel } from \"./widgets/agPanel\";\nimport { AgInputTextField } from \"./widgets/agInputTextField\";\nimport { AgInputTextArea } from \"./widgets/agInputTextArea\";\nimport { AgSlider } from \"./widgets/agSlider\";\nimport { AgColorPicker } from \"./widgets/agColorPicker\";\nimport { AgInputNumberField } from \"./widgets/agInputNumberField\";\nimport { AgInputRange } from \"./widgets/agInputRange\";\nimport { AgSelect } from \"./widgets/agSelect\";\nimport { AgAngleSelect } from \"./widgets/agAngleSelect\";\nimport { AgToggleButton } from \"./widgets/agToggleButton\";\nimport { DetailRowCompCache } from \"./rendering/row/detailRowCompCache\";\nimport { RowPositionUtils } from \"./entities/rowPosition\";\nimport { CellPositionUtils } from \"./entities/cellPosition\";\nimport { PinnedRowModel } from \"./pinnedRowModel/pinnedRowModel\";\nimport { IComponent } from \"./interfaces/iComponent\";\nimport { ModuleRegistry } from \"./modules/moduleRegistry\";\nimport { ModuleNames } from \"./modules/moduleNames\";\nimport { UndoRedoService } from \"./undoRedo/undoRedoService\";\nimport { AgStackComponentsRegistry } from \"./components/agStackComponentsRegistry\";\nimport { HeaderPositionUtils } from \"./headerRendering/header/headerPosition\";\nimport { HeaderNavigationService } from \"./headerRendering/header/headerNavigationService\";\nimport { exists, missing } from \"./utils/generic\";\nimport { assign, iterateObject } from \"./utils/object\";\nimport { ColumnDefFactory } from \"./columnController/columnDefFactory\";\nimport { RowCssClassCalculator } from \"./rendering/row/rowCssClassCalculator\";\nimport { RowNodeBlockLoader } from \"./rowNodeCache/rowNodeBlockLoader\";\nimport { RowNodeSorter } from \"./rowNodes/rowNodeSorter\";\nimport { ControllersService } from \"./controllersService\";\nimport { FakeHorizontalScrollComp } from \"./gridBodyComp/fakeHorizontalScrollComp\";\nimport { PinnedWidthService } from \"./gridBodyComp/pinnedWidthService\";\nimport { RowContainerComp } from \"./gridBodyComp/rowContainer/rowContainerComp\";\n\nexport interface GridParams {\n    // used by Web Components\n    globalEventListener?: Function;\n\n    // these are used by ng1 only\n    $scope?: any;\n    $compile?: any;\n\n    // this allows the base frameworks (React, NG2, etc) to provide alternative cellRenderers and cellEditors\n    frameworkOverrides?: IFrameworkOverrides;\n\n    // bean instances to add to the context\n    providedBeanInstances?: { [key: string]: any; };\n\n    modules?: Module[];\n}\n\n// creates JavaScript vanilla Grid, including JavaScript (ag-stack) components, which can\n// be wrapped by the framework wrappers\nexport class Grid {\n\n    protected logger: Logger;\n\n    private readonly gridOptions: GridOptions;\n\n    constructor(eGridDiv: HTMLElement, gridOptions: GridOptions, params?: GridParams) {\n\n        if (!gridOptions) {\n            console.error('AG Grid: no gridOptions provided to the grid');\n            return;\n        }\n\n        this.gridOptions = gridOptions;\n\n        new GridCoreCreator().create(eGridDiv, gridOptions, context => {\n            const gridComp = new GridComp(eGridDiv);\n            context.createBean(gridComp);\n        }, params);\n    }\n\n    public destroy(): void {\n        if (this.gridOptions && this.gridOptions.api) {\n            this.gridOptions.api.destroy();\n        }\n    }\n}\n\n// created services of grid only, no UI, so frameworks can use this if providing\n// their own UI\nexport class GridCoreCreator {\n\n    public create(eGridDiv: HTMLElement, gridOptions: GridOptions, uiCallback: (context: Context) => void, params?: GridParams): void {\n\n        const debug = !!gridOptions.debug;\n\n        const registeredModules = this.getRegisteredModules(params);\n\n        const beanClasses = this.createBeansList(gridOptions.rowModelType, registeredModules);\n        const providedBeanInstances = this.createProvidedBeans(eGridDiv, gridOptions, params);\n\n        if (!beanClasses) { return; } // happens when no row model found\n\n        const contextParams: ContextParams = {\n            providedBeanInstances: providedBeanInstances,\n            beanClasses: beanClasses,\n            debug: debug\n        };\n\n        const logger = new Logger('AG Grid', () => gridOptions.debug);\n        const contextLogger = new Logger('Context', () => contextParams.debug);\n        const context = new Context(contextParams, contextLogger);\n\n        this.registerModuleUserComponents(context, registeredModules);\n        this.registerStackComponents(context, registeredModules);\n\n        uiCallback(context);\n\n        this.setColumnsAndData(context);\n        this.dispatchGridReadyEvent(context, gridOptions);\n        const isEnterprise = ModuleRegistry.isRegistered(ModuleNames.EnterpriseCoreModule);\n        logger.log(`initialised successfully, enterprise = ${isEnterprise}`);\n    }\n\n    private registerStackComponents(context: Context, registeredModules: Module[]): void {\n        const agStackComponents = this.createAgStackComponentsList(registeredModules);\n        const agStackComponentsRegistry =\n            context.getBean('agStackComponentsRegistry') as AgStackComponentsRegistry;\n        agStackComponentsRegistry.setupComponents(agStackComponents);\n    }\n\n    private getRegisteredModules(params?: GridParams): Module[] {\n        const passedViaConstructor: Module[] | undefined | null = params ? params.modules : null;\n        const registered = ModuleRegistry.getRegisteredModules();\n\n        const allModules: Module[] = [];\n        const mapNames: { [name: string]: boolean; } = {};\n\n        // adds to list and removes duplicates\n        function addModule(moduleBased: boolean, mod: Module) {\n            function addIndividualModule(currentModule: Module) {\n                if (!mapNames[currentModule.moduleName]) {\n                    mapNames[currentModule.moduleName] = true;\n                    allModules.push(currentModule);\n                    ModuleRegistry.register(currentModule, moduleBased);\n                }\n            }\n\n            addIndividualModule(mod);\n            if (mod.dependantModules) {\n                mod.dependantModules.forEach(addModule.bind(null, moduleBased));\n            }\n        }\n\n        if (passedViaConstructor) {\n            passedViaConstructor.forEach(addModule.bind(null, true));\n        }\n\n        if (registered) {\n            registered.forEach(addModule.bind(null, !ModuleRegistry.isPackageBased()));\n        }\n\n        return allModules;\n    }\n\n    private registerModuleUserComponents(context: Context, registeredModules: Module[]): void {\n        const userComponentRegistry: UserComponentRegistry = context.getBean('userComponentRegistry');\n\n        const moduleUserComps: { componentName: string, componentClass: AgGridRegisteredComponentInput<IComponent<any>>; }[]\n            = this.extractModuleEntity(registeredModules,\n                (module) => module.userComponents ? module.userComponents : []);\n\n        moduleUserComps.forEach(compMeta => {\n            userComponentRegistry.registerDefaultComponent(compMeta.componentName, compMeta.componentClass);\n        });\n    }\n\n    private createProvidedBeans(eGridDiv: HTMLElement, gridOptions: GridOptions, params?: GridParams): any {\n        let frameworkOverrides = params ? params.frameworkOverrides : null;\n        if (missing(frameworkOverrides)) {\n            frameworkOverrides = new VanillaFrameworkOverrides();\n        }\n\n        const seed = {\n            gridOptions: gridOptions,\n            eGridDiv: eGridDiv,\n            $scope: params ? params.$scope : null,\n            $compile: params ? params.$compile : null,\n            globalEventListener: params ? params.globalEventListener : null,\n            frameworkOverrides: frameworkOverrides\n        };\n        if (params && params.providedBeanInstances) {\n            assign(seed, params.providedBeanInstances);\n        }\n\n        return seed;\n    }\n\n    private createAgStackComponentsList(registeredModules: Module[]): any[] {\n        let components: ComponentMeta[] = [\n            { componentName: 'AgCheckbox', componentClass: AgCheckbox },\n            { componentName: 'AgRadioButton', componentClass: AgRadioButton },\n            { componentName: 'AgToggleButton', componentClass: AgToggleButton },\n            { componentName: 'AgInputTextField', componentClass: AgInputTextField },\n            { componentName: 'AgInputTextArea', componentClass: AgInputTextArea },\n            { componentName: 'AgInputNumberField', componentClass: AgInputNumberField },\n            { componentName: 'AgInputRange', componentClass: AgInputRange },\n            { componentName: 'AgSelect', componentClass: AgSelect },\n            { componentName: 'AgSlider', componentClass: AgSlider },\n            { componentName: 'AgAngleSelect', componentClass: AgAngleSelect },\n            { componentName: 'AgColorPicker', componentClass: AgColorPicker },\n            { componentName: 'AgGridBody', componentClass: GridBodyComp },\n            { componentName: 'AgHeaderRoot', componentClass: HeaderRootComp },\n            { componentName: 'AgPagination', componentClass: PaginationComp },\n            { componentName: 'AgOverlayWrapper', componentClass: OverlayWrapperComponent },\n            { componentName: 'AgGroupComponent', componentClass: AgGroupComponent },\n            { componentName: 'AgPanel', componentClass: AgPanel },\n            { componentName: 'AgDialog', componentClass: AgDialog },\n            { componentName: 'AgRowContainer', componentClass: RowContainerComp },\n            { componentName: 'AgFakeHorizontalScroll', componentClass: FakeHorizontalScrollComp }\n        ];\n\n        const moduleAgStackComps = this.extractModuleEntity(registeredModules,\n            (module) => module.agStackComponents ? module.agStackComponents : []);\n\n        components = components.concat(moduleAgStackComps);\n\n        return components;\n    }\n\n    private createBeansList(rowModelType: string | undefined, registeredModules: Module[]): any[] | undefined {\n        const rowModelClass = this.getRowModelClass(rowModelType, registeredModules);\n\n        if (!rowModelClass) { return; }\n\n        // beans should only contain SERVICES, it should NEVER contain COMPONENTS\n\n        const beans = [\n            rowModelClass, Beans, RowPositionUtils, CellPositionUtils, HeaderPositionUtils,\n            PaginationAutoPageSizeService, GridApi, UserComponentRegistry, AgComponentUtils,\n            ComponentMetadataProvider, ResizeObserverService, UserComponentFactory,\n            RowContainerHeightService, AutoHeightCalculator, HorizontalResizeService,\n            PinnedRowModel, DragService, DisplayedGroupCreator, EventService, GridOptionsWrapper,\n            PopupService, SelectionController, FilterManager, ColumnController, HeaderNavigationService,\n            PaginationProxy, RowRenderer, ExpressionService, ColumnFactory, TemplateService,\n            AlignedGridsService, NavigationService, ValueCache, ValueService, LoggerFactory,\n            ColumnUtils, AutoWidthCalculator, StandardMenuFactory, DragAndDropService, ColumnApi,\n            FocusController, MouseEventService, Environment, CellNavigationService, ValueFormatterService,\n            StylingService, ScrollVisibleService, SortController, ColumnHoverService, ColumnAnimationService,\n            SelectableService, AutoGroupColService, ChangeDetectionService, AnimationFrameService,\n            DetailRowCompCache, UndoRedoService, AgStackComponentsRegistry, ColumnDefFactory,\n            RowCssClassCalculator, RowNodeBlockLoader, RowNodeSorter, ControllersService,\n            PinnedWidthService\n        ];\n\n        const moduleBeans = this.extractModuleEntity(registeredModules, (module) => module.beans ? module.beans : []);\n        beans.push(...moduleBeans);\n\n        // check for duplicates, as different modules could include the same beans that\n        // they depend on, eg ClientSideRowModel in enterprise, and ClientSideRowModel in community\n        const beansNoDuplicates: any[] = [];\n        beans.forEach(bean => {\n            if (beansNoDuplicates.indexOf(bean) < 0) {\n                beansNoDuplicates.push(bean);\n            }\n        });\n\n        return beansNoDuplicates;\n    }\n\n    private extractModuleEntity(moduleEntities: any[], extractor: (module: any) => any) {\n        return [].concat(...moduleEntities.map(extractor));\n    }\n\n    private setColumnsAndData(context: Context): void {\n        const gridOptionsWrapper: GridOptionsWrapper = context.getBean('gridOptionsWrapper');\n        const columnController: ColumnController = context.getBean('columnController');\n        const columnDefs = gridOptionsWrapper.getColumnDefs();\n\n        columnController.setColumnDefs(columnDefs || [], \"gridInitializing\");\n\n        const rowModel: IRowModel = context.getBean('rowModel');\n        rowModel.start();\n    }\n\n    private dispatchGridReadyEvent(context: Context, gridOptions: GridOptions): void {\n        const eventService: EventService = context.getBean('eventService');\n        const readyEvent: GridReadyEvent = {\n            type: Events.EVENT_GRID_READY,\n            api: gridOptions.api!,\n            columnApi: gridOptions.columnApi!\n        };\n        eventService.dispatchEvent(readyEvent);\n    }\n\n    private getRowModelClass(rowModelType: string | undefined, registeredModules: Module[]): any {\n\n        // default to client side\n        if (!rowModelType) {\n            rowModelType = Constants.ROW_MODEL_TYPE_CLIENT_SIDE;\n        }\n\n        const rowModelClasses: { [name: string]: { new(): IRowModel; }; } = {};\n        registeredModules.forEach(module => {\n            iterateObject(module.rowModels, (key: string, value: { new(): IRowModel; }) => {\n                rowModelClasses[key] = value;\n            });\n        });\n\n        const rowModelClass = rowModelClasses[rowModelType];\n\n        if (exists(rowModelClass)) { return rowModelClass; }\n\n        if (rowModelType === Constants.ROW_MODEL_TYPE_INFINITE) {\n            console.error(`AG Grid: Row Model \"Infinite\" not found. Please ensure the ${ModuleNames.InfiniteRowModelModule} is registered.';`);\n        }\n\n        console.error('AG Grid: could not find matching row model for rowModelType ' + rowModelType);\n        if (rowModelType === Constants.ROW_MODEL_TYPE_VIEWPORT) {\n            console.error(`AG Grid: Row Model \"Viewport\" not found. Please ensure the AG Grid Enterprise Module ${ModuleNames.ViewportRowModelModule} is registered.';`);\n        }\n\n        if (rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE) {\n            console.error(`AG Grid: Row Model \"Server Side\" not found. Please ensure the AG Grid Enterprise Module ${ModuleNames.ServerSideRowModelModule} is registered.';`);\n        }\n\n        if (rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {\n            console.error(`AG Grid: Row Model \"Client Side\" not found. Please ensure the ${ModuleNames.ClientSideRowModelModule} is registered.';`);\n        }\n    }\n\n}\n"]}